<!DOCTYPE html>
<html>

<head>
<title>Realty Group Quiz</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta charset="UTF-8">
<base target="_top">
<style>
.root-iframe {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  border: none;
  z-index: 1000;
  opacity: 1;
  }
</style>

</head>

<body>
<iframe id="root-iframe" class="root-iframe" allow="fullscreen *" src="https://docs.google.com/forms/d/e/1FAIpQLSeGmQUjzwmdxN5jJCb8vkvjya6lcpoAhW7GlUhpldUPbeVDtQ/viewform"></iframe>

<script>
const ANALYTICS_SERVICE = "https://script.google.com/macros/s/";
const SERVICE_ID = "AKfycbyW7xyhGdzm7IrtuvjOu0xukJBDfXWR1BiWY-FD_hbvV0-7WbUqMi34hVVlq6EDWxXfkw";
const QUIZ = "0";

function onOpen() {
  let id = getId();
  if (!id) return;
  let url = ANALYTICS_SERVICE.concat(SERVICE_ID, '/exec?', 'q=', QUIZ, '&','id=', id);
  fetch(url)
    .then(onOpenCallback)
    .catch(e => {
      console.error('analytics call failed');
    })
}

function onOpenCallback() {
  console.log("analytics saved");
}

function getId() {
  let q = window.location.search;
  if (!q) return null;
  q = q.replace("?", "");
  if (q.includes("&") || !q.includes("id")) return null;
  return q.split("=")[1];
}

onOpen();
</script>

</body>

</html>
